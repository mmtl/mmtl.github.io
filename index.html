<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# website: http://ogp.me/ns/website#">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="format-detection" content="telephone=no">
	<meta name="viewport" content="width=device-width, initial-scale=1">    
	<link rel="icon" type="image/png" href="images/favicon.ico">
	<link rel="manifest" href="/manifest.json">
	<title>test</title>
	<link rel="stylesheet" href="styles/font-awesome.min.css">
	<link rel="stylesheet" href="styles/index.css">
</head>

<body>

  <header class="header">
  <!-- /.header -->
  </header>

  <nav class="gnav">
  <!-- /.gnav -->
  </nav>

  <main>
    <div>
      <button id="butInstall" hidden>Install PWA</button>
    </div>
    <div class="eula_box">
      Test PWA rev.<span id="update_stamp">10110</span>
    </div>

    <div id="container">
      <div>Cookie</div>
      <div>
        <input type="text" id="input_value" />&nbsp;<button id="save_cookie_btn">Save</button>
        <div>
          Saved cookie: cookie1 = <span id="loaded_cookie"></span>
        </div>
      </div>

      <div>URI scheme<br>(Deprecated)</div>
      <div>
        <div>
          <button id="nec_ib_send_btn">nec-ib:Send data</button>
        </div>
        <div>
          <button id="nec_ib_close_btn">nec-ib:Close</button>
        </div>
        <div>
          <a href="https://www.google.co.jp/" target="_blank" id="open_browser_and_close_pwa">Open browser and close PWA</a>
        </div>
        <div>
          <button id="window_open_test">App open url and terminate PWA</button>
        </div>
      </div>

      <div>WebSocket</div>
      <div>
        <div>
          <button id="connect_server">Connect</button>&nbsp;&nbsp;<button id="close_connection">Close</button>
        </div>
        <div class="two_by_table">
          <div>Status: </div>
          <div><span id="connection_result"></span></div>
          <div>Received: </div>
          <div><span id="connection_message"></span></div>
        </div>
        <div id="commands">
          <div>Command:</div>
          <div>
            <div>
              <input type="text" id="send_data_value" value="ibact=0&mode=xyz&id=123">&nbsp;<button id="send_data">Send</button>
            </div>
            <div>
              <button id="ws_close_pwa">Close PWA</button>
            </div>
            <div>
              <button id="ws_close_pwa_and_open_url">Close PWA and Open Browser</button>
              &nbsp;<input type="text" id="open_url" value="https://www.google.co.jp/">
            </div>
            <div>
              <button id="ws_get_key">Get RSA public key</button>&nbsp;&nbsp;<span id="key_value"></span>
            </div>
          </div>
        </div>
      </div>

      <div>etc</div>
      <div>
        <button id="post_publish">test</button>
        <div id="dummy"></div>
      </div>
    </div>

    <!-- /.main -->
      
    <!--
    <div>
      <button id="testConfirm">Test confirmation</button>
    </div>
    <div>
      <button id="testPrompt">Test Prompt</button>
    </div>
    -->
  </main>

  <footer class="footer">
  <!-- /.footer -->
  </footer>

  <script src="/scripts/app.js"></script>
  <script src="/scripts/install.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
        .then((reg) => {
          console.log('Service worker registered.', reg);
        })
        .catch((err) => {
          console.log('Service worker did not register.', err);
        });

        load_cookie();
      });
    }
  </script>
</body>
</html>